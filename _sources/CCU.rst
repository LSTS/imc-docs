CCU Messages
=============

.. _ReportedState:

Reported State
---------------

A vehicle state that is reported to other consoles (including PDAConsole). Source can be acoustic tracker, SMS, Wi-Fi, etc...

- Abbreviation: ReportedState
- Identification Number: 600
- Payload Size: 59+  bytes
- Message Size: 81+  bytes

+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| Name              | Abbreviation | Unit                               | Type      | Description                                                                                        | Range              | 
+===================+==============+====================================+===========+====================================================================================================+====================+
| Latitude          | lat          | *rad*                              | fp64_t    |                                                                                                    | Same as field type | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| Longitude         | lon          | *rad*                              | fp64_t    |                                                                                                    | Same as field type | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| Depth             | depth        | *m*                                | fp64_t    | The reported depth. In the case of not knowing the depth 0 will be reported.                       | Same as field type | 
|                   |              |                                    |           | Airplanes usually have negative values (por positive altitude).                                    |                    | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| Roll              | roll         | *rad*                              | fp64_t    | The phi Euler angle from the vehicle's attitude.                                                   | Same as field type | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| Pitch             | pitch        | *rad*                              | fp64_t    | The theta Euler angle from the vehicle's attitude.                                                 | Same as field type | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| Yaw               | yaw          | *rad*                              | fp64_t    | The psi Euler angle from the vehicle's attitude.                                                   | Same as field type | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| Reception Time    | rcp_time     | *s*                                | fp64_t    | The time when the packet was sent, as seen by the packet                                           | Same as field type | 
|                   |              |                                    |           | dispatcher. The number of seconds is represented in Universal                                      |                    | 
|                   |              |                                    |           | Coordinated Time (UCT) in seconds since Jan 1, 1970 using IEEE                                     |                    | 
|                   |              |                                    |           | double precision floating point numbers.                                                           |                    | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| System Identifier | sid          | *-*                                | plaintext | The id of the system whose position is being reported (it can be a vehicle's id, a boat name, etc) | Same as field type | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+
| Source Type       | s_type       | *Enumerated*                       | uint8_t   | How the position was received/calculated                                                           | Same as field type | 
|                   |              | (:ref:`ReportedState-enum-s_type`) |           |                                                                                                    |                    | 
+-------------------+--------------+------------------------------------+-----------+----------------------------------------------------------------------------------------------------+--------------------+

.. _ReportedState-enum-s_type:

.. _ReportedState-enum-prefix-STYPE:

Enum Source Type
^^^^^^^^^^^^^^^^^

How the position was received/calculated

- Abbreviation: s_type
- Prefix: STYPE

+-------+----------------+----------------+-------------+
| Value | Name           | Abbreviation   | Description | 
+=======+================+================+=============+
| 0     | Wi-Fi          | WI_FI          | *-*         | 
+-------+----------------+----------------+-------------+
| 1     | Tracker        | TRACKER        | *-*         | 
+-------+----------------+----------------+-------------+
| 2     | SMS            | SMS            | *-*         | 
+-------+----------------+----------------+-------------+
| 3     | Acoustic Modem | ACOUSTIC_MODEM | *-*         | 
+-------+----------------+----------------+-------------+
| 254   | Unknown source | UNKNOWN        | *-*         | 
+-------+----------------+----------------+-------------+

.. _RemoteSensorInfo:

Remote Sensor Info
-------------------

Whenever the CUCS receives a message from one of the existing sensors (through SMS, ZigBee, Acoustic Comms, ...) it disseminates that info recurring to this message.

- Abbreviation: RemoteSensorInfo
- Identification Number: 601
- Payload Size: 30+  bytes
- Message Size: 52+  bytes

+-------------+--------------+-------------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+
| Name        | Abbreviation | Unit        | Type      | Description                                                                                                                                                                                     | Range              | 
+=============+==============+=============+===========+=================================================================================================================================================================================================+====================+
| Id          | id           | *-*         | plaintext | An unique string that identifies the sensor. Used mostly for logging/presentation.                                                                                                              | Same as field type | 
+-------------+--------------+-------------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+
| Class       | sensor_class | *-*         | plaintext | The class of a sensor tells the type of sensor originating this message. It will determine how the sensor is to be shown and (optionally) how the custom data (tuplelist) is to be interpreted. | Same as field type | 
+-------------+--------------+-------------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+
| Latitude    | lat          | *rad*       | fp64_t    |                                                                                                                                                                                                 | Same as field type | 
+-------------+--------------+-------------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+
| Longitude   | lon          | *rad*       | fp64_t    |                                                                                                                                                                                                 | Same as field type | 
+-------------+--------------+-------------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+
| Altitude    | alt          | *m*         | fp32_t    |                                                                                                                                                                                                 | Same as field type | 
+-------------+--------------+-------------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+
| Heading     | heading      | *rad*       | fp32_t    |                                                                                                                                                                                                 | Same as field type | 
+-------------+--------------+-------------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+
| Custom Data | data         | *TupleList* | plaintext |                                                                                                                                                                                                 | Same as field type | 
+-------------+--------------+-------------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+

.. _Map:

Map
----

This message represents a simple map that is transferred between CCU consoles (from Neptus to ACCU)

- Abbreviation: Map
- Identification Number: 602
- Payload Size: 4+  bytes
- Message Size: 26+  bytes

+------------+--------------+------+---------------------+-------------------------+--------------------+
| Name       | Abbreviation | Unit | Type                | Description             | Range              | 
+============+==============+======+=====================+=========================+====================+
| Identifier | id           | *-*  | plaintext           | The id of the map       | Same as field type | 
+------------+--------------+------+---------------------+-------------------------+--------------------+
| Features   | features     | *-*  | message-list        | A list of map features. | Same as field type | 
|            |              |      | (:ref:`MapFeature`) |                         |                    | 
+------------+--------------+------+---------------------+-------------------------+--------------------+

.. _MapFeature:

Map Feature
------------

A feature to appear on the map

- Abbreviation: MapFeature
- Identification Number: 603
- Payload Size: 8+  bytes
- Message Size: 30+  bytes

+----------------+--------------+---------------------------------------+-------------------+----------------------------------------------------------------------------------+--------------------+
| Name           | Abbreviation | Unit                                  | Type              | Description                                                                      | Range              | 
+================+==============+=======================================+===================+==================================================================================+====================+
| Identifier     | id           | *-*                                   | plaintext         | The unique identifier for this feature (used as the name for points of interest) | Same as field type | 
+----------------+--------------+---------------------------------------+-------------------+----------------------------------------------------------------------------------+--------------------+
| FeatureType    | feature_type | *Enumerated*                          | uint8_t           | The type of feature                                                              | Same as field type | 
|                |              | (:ref:`MapFeature-enum-feature_type`) |                   |                                                                                  |                    | 
+----------------+--------------+---------------------------------------+-------------------+----------------------------------------------------------------------------------+--------------------+
| RedComponent   | rgb_red      | *-*                                   | uint8_t           | The red component of the color for this point                                    | Same as field type | 
+----------------+--------------+---------------------------------------+-------------------+----------------------------------------------------------------------------------+--------------------+
| GreenComponent | rgb_green    | *-*                                   | uint8_t           | The green component of the color for this point                                  | Same as field type | 
+----------------+--------------+---------------------------------------+-------------------+----------------------------------------------------------------------------------+--------------------+
| BlueComponent  | rgb_blue     | *-*                                   | uint8_t           | The blue component of the color for this point                                   | Same as field type | 
+----------------+--------------+---------------------------------------+-------------------+----------------------------------------------------------------------------------+--------------------+
| Feature        | feature      | *-*                                   | message-list      | The enclosing feature definition.                                                | Same as field type | 
|                |              |                                       | (:ref:`MapPoint`) |                                                                                  |                    | 
+----------------+--------------+---------------------------------------+-------------------+----------------------------------------------------------------------------------+--------------------+

.. _MapFeature-enum-feature_type:

.. _MapFeature-enum-prefix-FTYPE:

Enum FeatureType
^^^^^^^^^^^^^^^^^

The type of feature

- Abbreviation: feature_type
- Prefix: FTYPE

+-------+--------------------+---------------+--------------------------------------------------------------------------------------------+
| Value | Name               | Abbreviation  | Description                                                                                | 
+=======+====================+===============+============================================================================================+
| 0     | Point of Interest  | POI           | These features should appear as a point with a label in the map                            | 
+-------+--------------------+---------------+--------------------------------------------------------------------------------------------+
| 1     | Filled Polygon     | FILLEDPOLY    | These features should be represented as a filled polygon (no label)                        | 
+-------+--------------------+---------------+--------------------------------------------------------------------------------------------+
| 2     | Countoured Polygon | CONTOUREDPOLY | These features should be represented as a countoured closed polygon (no fill and no label) | 
+-------+--------------------+---------------+--------------------------------------------------------------------------------------------+
| 3     | Line               | LINE          | These features should be represented as an open polygon (no label)                         | 
+-------+--------------------+---------------+--------------------------------------------------------------------------------------------+
| 4     | Transponder        | TRANSPONDER   | A transponder location in the map                                                          | 
+-------+--------------------+---------------+--------------------------------------------------------------------------------------------+
| 5     | Start Location     | STARTLOC      | Intended vehicle's starting location                                                       | 
+-------+--------------------+---------------+--------------------------------------------------------------------------------------------+
| 6     | Home Reference     | HOMEREF       | The offsets reference for this map                                                         | 
+-------+--------------------+---------------+--------------------------------------------------------------------------------------------+

.. _MapPoint:

MapPoint
---------

This message represents a point in the world.

- Abbreviation: MapPoint
- Identification Number: 604
- Payload Size: 20 bytes
- Message Size: 42 bytes

+-----------+--------------+-------+--------+-------------+--------------------+
| Name      | Abbreviation | Unit  | Type   | Description | Range              | 
+===========+==============+=======+========+=============+====================+
| Latitude  | lat          | *rad* | fp64_t |             | Same as field type | 
+-----------+--------------+-------+--------+-------------+--------------------+
| Longitude | lon          | *rad* | fp64_t |             | Same as field type | 
+-----------+--------------+-------+--------+-------------+--------------------+
| Altitude  | alt          | *m*   | fp32_t |             | Same as field type | 
+-----------+--------------+-------+--------+-------------+--------------------+

.. _CcuEvent:

CCU Event
----------

This message is used to signal events among running CCUs.

- Abbreviation: CcuEvent
- Identification Number: 606
- Payload Size: 5+  bytes
- Message Size: 27+  bytes

+-----------------+--------------+-----------------------------+-----------+-------------+--------------------+
| Name            | Abbreviation | Unit                        | Type      | Description | Range              | 
+=================+==============+=============================+===========+=============+====================+
| Event Type      | type         | *Enumerated*                | uint8_t   |             | Same as field type | 
|                 |              | (:ref:`CcuEvent-enum-type`) |           |             |                    | 
+-----------------+--------------+-----------------------------+-----------+-------------+--------------------+
| Identifier      | id           | *-*                         | plaintext |             | Same as field type | 
+-----------------+--------------+-----------------------------+-----------+-------------+--------------------+
| Additional Data | arg          | *-*                         | message   |             | Same as field type | 
+-----------------+--------------+-----------------------------+-----------+-------------+--------------------+

.. _CcuEvent-enum-type:

.. _CcuEvent-enum-prefix-EVT:

Enum Event Type
^^^^^^^^^^^^^^^^

No description

- Abbreviation: type
- Prefix: EVT

+-------+----------------------------------------------+-----------------------+-------------+
| Value | Name                                         | Abbreviation          | Description | 
+=======+==============================================+=======================+=============+
| 1     | Log Book Entry Added                         | LOG_ENTRY             | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+
| 2     | Plan Added                                   | PLAN_ADDED            | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+
| 3     | Plan Removed                                 | PLAN_REMOVED          | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+
| 4     | Plan Changed                                 | PLAN_CHANGED          | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+
| 5     | Map feature added                            | MAP_FEATURE_ADDED     | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+
| 6     | Map feature removed                          | MAP_FEATURE_REMOVED   | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+
| 7     | Map feature changed                          | MAP_FEATURE_CHANGED   | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+
| 8     | The sender is now teleoperating the vehicle  | TELEOPERATION_STARTED | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+
| 9     | The sender stopped teleoperating the vehicle | TELEOPERATION_ENDED   | *-*         | 
+-------+----------------------------------------------+-----------------------+-------------+

